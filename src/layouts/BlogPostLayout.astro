---
// Component imports and setup JavaScript go here!
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header/Header.astro";
import Footer from "../components/Footer.astro";
import { generateCategoryData } from "../utils/helpers.js";

const { content } = Astro.props;

const allCategoriesData = generateCategoryData(content.categories);
// console.log(allCategoriesData);
---

<html lang="en">
  <head>
    <BaseHead title={content.title} description={content.description} />
    <style>
      ul.tags {
        display: flex;
        align-items: center;
        list-style-type: none;
        margin: 0;
        padding: 0;
        margin-bottom: 0.25rem;
      }
      p {
        margin: 0;
      }
      time {
        color: var(--color-text);
        margin-left: auto;
      }
      h1 {
        margin: 0;
        font-weight: 600;
      }
      hr {
        margin: 1rem 0 0 0;
        border: 0;
        background: none;
        width: 100%;
        border: 1px solid var(--color-highlight);
        background: var(--color-highlight);
      }
    </style>
  </head>

  <body>
    <Header />
    <main class="left small">
      <ul class="tags">
        {
          allCategoriesData.map((category) => (
            <li>
              <a class="tag" href={`/blog/categories/${category.slug}`}>
                {category.name}
              </a>
            </li>
          ))
        }
      </ul>
      <h1>{content.title}</h1>
      <div class="inline">
        <p class="author">Written by {content.author}</p>
        <time>{content.pubDate}</time>
      </div>
      <hr />
      <article>
        <slot />
      </article>
    </main>
    <Footer />
  </body>
</html>
